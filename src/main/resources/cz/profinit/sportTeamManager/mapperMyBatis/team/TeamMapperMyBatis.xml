<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="cz.profinit.sportTeamManager.mapperMyBatis.team.TeamMapperMyBatis">
<!--
    <resultMap id="ownerResultMap" type="RegisteredUser">
        <id property="entityId" column="c_owner"/>
    </resultMap>
-->
    <resultMap id="teamResultMap" type="Team">
        <id property="entityId" column="c_id"/>
        <result property="name" column="c_name"/>
        <result property="sport" column="c_sport"/>

        <association property="owner" javaType="RegisteredUser">
            <id property="entityId" column="c_owner"/>
        </association>
    </resultMap>

    <select id="insertTeam" parameterType="Team" resultMap="teamResultMap">
        INSERT INTO t_team (c_name, c_sport, c_owner)
        VALUES (#{name}, #{sport}, #{owner.entityId})
        RETURNING *
    </select>

    <select id="updateTeam" parameterType="Team" resultMap="teamResultMap">
        UPDATE t_team SET c_name=#{name}, c_sport=#{sport}, c_owner=#{owner.entityId}
        WHERE c_id = #{entityId}
        RETURNING *
    </select>

    <select id="deleteTeamById" parameterType="Long" resultMap="teamResultMap">
        DELETE FROM t_team WHERE c_id = #{id}
        RETURNING *
    </select>

    <select id="findTeamById" parameterType="Long" resultMap="teamResultMap">
        SELECT * FROM t_team WHERE c_id = #{id}
    </select>

    <select id="findTeamsByName" parameterType="String" resultMap="teamResultMap">
        SELECT * FROM t_team WHERE c_name = #{name}
    </select>
</mapper>